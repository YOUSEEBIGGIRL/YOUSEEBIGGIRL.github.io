

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon.png">
  <link rel="icon" href="/img/icon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="void">
  <meta name="keywords" content="">
  
    <meta name="description" content="1. char 和 varchar 的区别char 是固定长度，varchar 长度可变，存储时，前者不管实际存储数据的长度，直接规定 char 规定的长度分配存储空间；而后者会根据实际存储的数据分配最终的存储空间。 以char(32)和varchar(32)举例：（这里的 32 表示字符数）     char(32) varchar(32)    占用空间 固定32字符（如果数据长度不够32将用">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 面试题">
<meta property="og:url" content="https://autsu.github.io/2021/07/25/mysql-mian-jing/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1. char 和 varchar 的区别char 是固定长度，varchar 长度可变，存储时，前者不管实际存储数据的长度，直接规定 char 规定的长度分配存储空间；而后者会根据实际存储的数据分配最终的存储空间。 以char(32)和varchar(32)举例：（这里的 32 表示字符数）     char(32) varchar(32)    占用空间 固定32字符（如果数据长度不够32将用">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/autsu/diagrams/master/img/redolog.webp">
<meta property="og:image" content="https://camo.githubusercontent.com/d318aaf4eefb0297e8d605f69c76d95094effe92bcb7bd98fb07e203b1930e95/68747470733a2f2f7374617469633030312e6765656b62616e672e6f72672f7265736f757263652f696d6167652f30642f64392f30643230373065386638346334383031616462666130336264613166393864392e706e67">
<meta property="article:published_time" content="2021-07-25T02:04:25.000Z">
<meta property="article:modified_time" content="2023-08-24T14:49:52.707Z">
<meta property="article:author" content="void">
<meta property="article:tag" content="面试题">
<meta property="article:tag" content="mysql">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://raw.githubusercontent.com/autsu/diagrams/master/img/redolog.webp">
  
  
  
  <title>MySQL 面试题 - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/custom.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"autsu.github.io","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":"G-80J26VFWFL","gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"6KXGn05vaODkTMKM7zd5lWwl-gzGzoHsz","app_key":"qIMQwH4WrxTe8ds3Ua4HAbet","server_url":"https://6kxgn05v.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":true}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  
    <!-- Google Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript('https://www.google-analytics.com/analytics.js', function() {
          window.ga = window.ga || function() { (ga.q = ga.q || []).push(arguments) };
          ga.l = +new Date;
          ga('create', 'G-80J26VFWFL', 'auto');
          ga('send', 'pageview');
        });
      }
    </script>
  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>/dev/null</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="MySQL 面试题"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2021-07-25 10:04" pubdate>
          2021年7月25日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          8k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          67 分钟
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">MySQL 面试题</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="1-char-和-varchar-的区别"><a href="#1-char-和-varchar-的区别" class="headerlink" title="1. char 和 varchar 的区别"></a>1. char 和 varchar 的区别</h1><p>char 是固定长度，varchar 长度可变，存储时，前者不管实际存储数据的长度，直接规定 char 规定的长度分配存储空间；而后者会根据实际存储的数据分配最终的存储空间。</p>
<p>以char(32)和varchar(32)举例：（这里的 32 表示字符数）</p>
<table>
<thead>
<tr>
<th align="left"></th>
<th>char(32)</th>
<th>varchar(32)</th>
</tr>
</thead>
<tbody><tr>
<td align="left">占用空间</td>
<td>固定32字符（如果数据长度不够32将用空格补齐）</td>
<td>跟随实际存储内容长度，但不超过32</td>
</tr>
<tr>
<td align="left">空格处理</td>
<td>检索时会去掉尾部空格（数据本身有空白符也会被去掉）</td>
<td>不会对空格处理</td>
</tr>
<tr>
<td align="left">是否记录字段长度</td>
<td>否</td>
<td>是。额外拿出空间记录字段数据长度（字符数）</td>
</tr>
<tr>
<td align="left">适用场景</td>
<td>存储的数据长度基本一致，不需要空格，eg 手机号、UUID、密码加密后的密文</td>
<td>数据长度不一定，长度范围变化较大的场景</td>
</tr>
</tbody></table>
<p><em>小问题：char(1) 和 varchar(1) 的区别？两个都只能保存单个字符，但是 varchar 要多占一个或两个存储位置用来记录存储长度信息</em></p>
<h1 id="2-建立一个联合索引，问-select-a，b，c-和-select-a，c，b-有什么区别"><a href="#2-建立一个联合索引，问-select-a，b，c-和-select-a，c，b-有什么区别" class="headerlink" title="2. 建立一个联合索引，问 select a，b，c 和 select a，c，b 有什么区别"></a>2. 建立一个联合索引，问 select a，b，c 和 select a，c，b 有什么区别</h1><p>MySQL 的 最左前缀匹配原则</p>
<h1 id="3-varchar-类型，插入的数据超过设置的长度会怎样"><a href="#3-varchar-类型，插入的数据超过设置的长度会怎样" class="headerlink" title="3. varchar 类型，插入的数据超过设置的长度会怎样"></a>3. varchar 类型，插入的数据超过设置的长度会怎样</h1><p>来源： <a target="_blank" rel="noopener" href="https://www.hegongshan.com/2020/04/22/mysql-varchar/">https://www.hegongshan.com/2020/04/22/mysql-varchar/</a></p>
<p>网上基本都说字符串会被自动截断，并报出一个 warning，但是，我在本机上测试时（MySQL 8.0.16），却报了如下错误：</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">ERROR </span>1406 (22001): Data too long for column &#x27;name&#x27; at row 1<br></code></pre></td></tr></table></figure>

<p>这是怎么回事呢？后来，我发现，这两种情况是由于SQL模式不同造成的。</p>
<p>在MySQL中，有如下三种最重要的SQL模式（官网称之为<code>The Most Important SQL Modes</code>）</p>
<ol>
<li><p>ANSI </p>
<blockquote>
<p>宽松模式</p>
<p>此模式更改语法和行为，使其更接近标准SQL</p>
</blockquote>
</li>
<li><p>STRICT_TRANS_TABLES</p>
<blockquote>
<p>严格模式</p>
<p>在该模式下,如果一个值不能插入到一个事务表中,则中断当前的操作,对非事务表不做限制</p>
</blockquote>
</li>
<li><p>TRADITIONAL</p>
<blockquote>
<p>在向列中插入错误值时，此模式“给出错误而不是警告”。</p>
<p>TRADITIONAL 是一个组合模式，它包含了 STRICT_TRANS_TABLES</p>
</blockquote>
</li>
</ol>
<p>使用 <code>select @@sql_mode</code> 查看当前的 sql_mode。</p>
<p><code>set @@sql_mode = &#39;traditional&#39;</code> 更改当前 sql_mode。</p>
<p><strong>总结</strong></p>
<p>当 varchar 超过限制长度时，</p>
<p>1.如果当前的 SQL 模式为宽松模式，那么将会按照从前往后的顺序，对字符串进行截断，并提示一个警告；</p>
<p>2.如果当前的 SQL 模式为严格模式，那么将会报出一个错误。</p>
<h1 id="MYSQL-事务的-ACID"><a href="#MYSQL-事务的-ACID" class="headerlink" title="MYSQL 事务的 ACID"></a>MYSQL 事务的 ACID</h1><ul>
<li>A：原子性，保证事务要不全部执行成功，要不全部失败</li>
<li>C：一致性，保证事务从一个正确的状态转换到另一个正确的状态</li>
<li>I：隔离性，事务和事务之间是隔离的，并且有不同的隔离级别</li>
<li>D：持久性，事务最终会保存到硬盘上，对数据库的更改是永久性的</li>
</ul>
<h1 id="MySQL-原子性怎么保证"><a href="#MySQL-原子性怎么保证" class="headerlink" title="MySQL 原子性怎么保证"></a>MySQL 原子性怎么保证</h1><p>通过 undo log（回滚日志），</p>
<h1 id="redolog-工作原理"><a href="#redolog-工作原理" class="headerlink" title="redolog 工作原理"></a>redolog 工作原理</h1><p>当有一条记录需要更新的时候，InnoDB 引擎就会先把记录写到 redo log 里面，并更新内存，这个时候更新就算完成了。同时，InnoDB 引擎会在适当的时候，将这个操作记录更新到磁盘里面，而这个更新往往是在系统比较空闲的时候做，</p>
<p>InnoDB 的 redo log 是固定大小的，比如可以配置为一组 4 个文件，每个文件的大小是 1GB，那么这块“粉板”总共就可以记录 4GB 的操作。从头开始写，写到末尾就又回到开头循环写，如下面这个图所示。</p>
<p><img src="https://raw.githubusercontent.com/autsu/diagrams/master/img/redolog.webp" srcset="/img/loading.gif" lazyload></p>
<p>write pos 是当前记录的位置，一边写一边后移，写到第 3 号文件末尾后就回到 0 号文件开头。checkpoint 是当前要擦除的位置，也是往后推移并且循环的，擦除记录前要把记录更新到数据文件。</p>
<p>write pos 和 checkpoint 之间的是“粉板”上还空着的部分，可以用来记录新的操作。如果 write pos 追上 checkpoint，表示“粉板”满了，这时候不能再执行新的更新，得停下来先擦掉一些记录（也就是写入到硬盘），把 checkpoint 推进一下（写入成功后只移动 checkpoint，而不会清空数据，后续直接覆盖写即可）。</p>
<h1 id="宕机后如何保证数据不丢失？"><a href="#宕机后如何保证数据不丢失？" class="headerlink" title="宕机后如何保证数据不丢失？"></a>宕机后如何保证数据不丢失？</h1><p>通过 redolog，MySQL 使用了 WAL，在更新记录时会先将操作写到 redo log（redo log 也是一个文件，保存在磁盘上），然后 MySQL 启动时会先检查一下 redo log，看里面有没有内容，有的话说明就说明存在未落盘的数据，此时就可以通过 redo log 将这些数据重新写入到磁盘，从而保证数据不丢失。</p>
<p>redo log 的工作原理参见上面</p>
<h1 id="undolog-在宕机时怎么保证原子性"><a href="#undolog-在宕机时怎么保证原子性" class="headerlink" title="undolog 在宕机时怎么保证原子性"></a>undolog 在宕机时怎么保证原子性</h1><h1 id="什么是-binlog"><a href="#什么是-binlog" class="headerlink" title="什么是 binlog"></a>什么是 binlog</h1><p>binlog 用于记录数据库执行的写入性操作（不包括查询）信息，以二进制的形式保存在磁盘中。binlog 是 MySQL 的逻辑日志，并且由 Server 层进行记录，使用任何存储引擎的 <a target="_blank" rel="noopener" href="https://cloud.tencent.com/product/cdb?from_column=20065&from=20065">MySQL数据库</a> 都会记录 binlog 日志。</p>
<ul>
<li>逻辑日志：可以简单理解为记录的就是 SQL 语句。</li>
<li>物理日志：因为 MySQL 数据最终是保存在数据页中的，物理日志记录的就是数据页变更。</li>
</ul>
<p>binlog 是通过追加的方式进行写入的，可以通过 max_binlog_size 参数设置每个 binlog 文件的大小，当文件大小达到给定值之后，会生成新的文件来保存日志。</p>
<p>在实际应用中，binlog 的主要使用场景有两个，分别是主从复制和数据恢复。</p>
<ul>
<li>主从复制：在 Master 端开启 binlog，然后将 binlog 发送到各个 Slave 端，Slave 端重放 binlog 从而达到主从数据一致。</li>
<li>数据恢复：通过使用 mysqlbinlog 工具来恢复数据。</li>
</ul>
<h1 id="主从复制原理"><a href="#主从复制原理" class="headerlink" title="主从复制原理"></a>主从复制原理</h1><ul>
<li>主库的更新 SQL (update、insert、delete) 被写到 binlog。</li>
<li>从库发起连接，连接到主库。</li>
<li>此时主库创建一个 binlog dump thread，把 bin log 的内容发送到从库。</li>
<li>从库启动之后，创建一个 I&#x2F;O 线程，读取主库传过来的 bin log 内容并写入到 relay log（中继日志）。</li>
<li>从库还会创建一个 SQL 线程，从 relay log 里面读取内容，从 ExecMasterLog_Pos 位置开始执行读取到的更新事件，将更新内容写入到 slave 的 db。</li>
</ul>
<h1 id="幻读和不可重复读的区别"><a href="#幻读和不可重复读的区别" class="headerlink" title="幻读和不可重复读的区别"></a>幻读和不可重复读的区别</h1><p>不可重复读与幻读的区别可以通俗的理解为：前者是数据变了，后者是数据的行数变了</p>
<p>幻读（Phantom Read）和不可重复读（Non-repeatable Read）都是并发环境下可能出现的数据读取问题，但它们的原因和表现方式有所不同。</p>
<ol>
<li>幻读（Phantom Read）： 幻读指的是在事务中多次执行相同的查询，但在两次查询之间有其他事务插入了新的数据，导致第二次查询返回的结果集中出现了新插入的数据，就好像产生了”幻影”一样。幻读通常与范围查询（Range Query）有关，例如使用了 WHERE 子句的查询。</li>
</ol>
<p>幻读的产生原因是由于并发事务之间的插入操作，可能导致事务在同样的查询条件下获取的结果集不一致，从而出现了额外的行数据。</p>
<ol>
<li>不可重复读（Non-repeatable Read）： 不可重复读指的是在事务中多次执行相同的查询，但在两次查询之间有其他事务对同一行数据进行了修改或删除，导致第二次查询返回的结果与第一次查询不一致。</li>
</ol>
<p>不可重复读的产生原因是由于并发事务之间的更新或删除操作，导致事务在多次读取同一行数据时，数据内容发生了变化，从而出现了不一致的情况。</p>
<p>区别：</p>
<ul>
<li>幻读与范围查询有关，主要涉及到新增数据，而不可重复读主要涉及到已有数据的更新或删除。</li>
<li>幻读是指查询同样的条件下结果集的行数发生了变化，而不可重复读是指查询同样的条件下结果集的行数据内容发生了变化。</li>
</ul>
<p>解决方法：</p>
<ul>
<li>幻读通常通过使用锁或多版本并发控制（MVCC）来解决。</li>
<li>不可重复读通常通过使用锁或使用行级别的读取锁（Read Lock）来解决。</li>
</ul>
<p>需要注意的是，幻读和不可重复读是数据库事务隔离级别中的现象。在不同的事务隔离级别下，这些问题的出现与解决方式也可能有所不同。</p>
<h1 id="介绍下乐观锁悲观锁，以及各自的使用场景"><a href="#介绍下乐观锁悲观锁，以及各自的使用场景" class="headerlink" title="介绍下乐观锁悲观锁，以及各自的使用场景"></a>介绍下乐观锁悲观锁，以及各自的使用场景</h1><p>乐观锁和悲观锁是并发控制中常见的两种策略，用于解决多个线程或进程并发访问共享资源时可能发生的数据一致性问题。</p>
<ol>
<li>悲观锁（Pessimistic Locking）： 悲观锁是一种保守的并发控制策略，它假设并发访问的操作会发生冲突，因此在访问共享资源之前，会先对资源进行加锁，确保其他线程无法同时修改该资源。悲观锁的典型应用是使用数据库的行级锁（如行锁、表锁）来保证数据的一致性。悲观锁的特点是阻塞其他线程的访问，可能导致线程等待和性能下降。</li>
</ol>
<p>适用场景：</p>
<ul>
<li>需要修改共享资源的概率较高。</li>
<li>并发访问频率较高。</li>
<li>并发冲突的概率较大。</li>
<li>数据库事务隔离级别为串行化（Serializable）。</li>
</ul>
<ol>
<li>乐观锁（Optimistic Locking）： 乐观锁是一种乐观的并发控制策略，它假设并发访问的操作不会发生冲突，因此在访问共享资源时，不会立即对资源加锁，而是在更新操作时检查资源是否被其他线程修改过。乐观锁通过使用版本号、时间戳等机制来判断资源是否被修改。如果检测到冲突，则需要进行回滚或重试操作。乐观锁的特点是不阻塞其他线程的访问，但可能存在冲突处理的开销。</li>
</ol>
<p>适用场景：</p>
<ul>
<li>读取操作远远大于写入操作。</li>
<li>并发访问冲突较少。</li>
<li>数据库事务隔离级别为读已提交（Read Committed）或更低。</li>
</ul>
<p>选择乐观锁还是悲观锁取决于具体的应用场景和需求。在高并发环境下，悲观锁可能导致性能下降和线程阻塞，而乐观锁可以提供更好的并发性能。但是，乐观锁需要额外的冲突检测和处理机制，适用于冲突较少的场景。在实际应用中，可以根据具体情况选择合适的并发控制策略。</p>
<h1 id="索引设计原则"><a href="#索引设计原则" class="headerlink" title="索引设计原则"></a>索引设计原则</h1><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904009329803277">https://juejin.cn/post/6844904009329803277</a></p>
<ol>
<li><p><strong>为常作为查询条件的字段建立索引</strong></p>
<p>如果某个字段经常用来做查询条件，那么该字段的查询速度会影响整个表的查询速度。因此，为这样的字段建立索引，可以提高整个表的查询速度。</p>
</li>
<li><p><strong>避免索引失效（参考索引失效场景）</strong></p>
</li>
<li><p><strong>为经常需要排序、分组操作的字段建立索引</strong></p>
<p>经常需要 ORDER BY、GROUP BY、DISTINCT 等操作的字段，排序操作会浪费很多时间。如果为其建立索引，可以有效地避免排序操作。</p>
</li>
<li><p><strong>限制索引的数目</strong></p>
<p>索引的数目不是越多越好。每个索引都需要占用磁盘空间，索引越多，需要的磁盘空间就越大。修改表时，对索引的重构和更新很麻烦。越多的索引，会使更新表变得很浪费时间。</p>
</li>
<li><p><strong>扩展索引</strong></p>
<p>尽量的扩展索引，不要新建索引。比如表中已经有a的索引，现在要加 (a,b) 的索引，那么只需要修改原来的索引即可</p>
</li>
<li><p><strong>尽量使用数据量少的索引</strong></p>
<p>如果索引的值很长，那么查询的速度会受到影响。例如，对一个 CHAR(100 )类型的字段进行全文检索需要的时间要比对CHAR(10)类型的字段需要的时间要多。</p>
</li>
<li><p><strong>尽量使用前缀来索引</strong></p>
<p>如果索引字段的值很长，最好使用值的前缀来索引。例如，TEXT 和 BLOG 类型的字段，进行全文检索会很浪费时间。如果只检索字段的前面的若干个字符，这样可以提高检索速度。</p>
</li>
<li><p>删除不再使用或者很少使用的索引</p>
<p>表中的数据被大量更新，或者数据的使用方式被改变后，原有的一些索引可能不再需要。数据库管理员应当定期找出这些索引，将它们删除，从而减少索引对更新操作的影响。</p>
</li>
</ol>
<h1 id="说一下-Mysql-二阶段提交"><a href="#说一下-Mysql-二阶段提交" class="headerlink" title="说一下 Mysql 二阶段提交"></a>说一下 Mysql 二阶段提交</h1><h1 id="索引失效场景"><a href="#索引失效场景" class="headerlink" title="索引失效场景"></a>索引失效场景</h1><p>在 MySQL 中，索引可能会失效的几种常见情况包括：</p>
<ol>
<li>不使用索引列或对索引列进行函数操作：当查询条件中对索引列进行函数操作、类型转换或计算时，索引可能无法被利用，导致失效。例如：<code>WHERE UPPER(name) = &#39;JOHN&#39;</code>。</li>
<li>使用 <code>OR</code> 进行条件判断：当查询条件 WHERE 中包含 <code>OR</code> 运算符时，如果其中一个条件无法使用索引，整个查询可能无法使用索引优化。例如：<code>WHERE name = &#39;John&#39; OR age = 25</code>。</li>
<li>使用 <code>NOT</code> 进行条件判断：<code>NOT</code> 运算符通常会导致索引失效，因为它会使索引无法直接匹配，需要全表扫描。例如：<code>WHERE NOT name = &#39;John&#39;</code>。</li>
<li>对索引使用左或者左右模糊匹配：当查询条件使用通配符在索引列开头，或者在开头和结尾，此时进行模糊匹配，索引可能无法被利用。例如：<code>WHERE name LIKE &#39;%John%&#39;, WHERE name LIKE &#39;%John&#39;</code>。</li>
<li>索引列参与运算：当查询条件中的索引列参与运算（如加减乘除）时，索引可能会失效。例如：<code>WHERE age + 5 = 30</code>。</li>
<li>隐式类型转换：当查询条件中使用的数据类型与索引列的数据类型不匹配时，MySQL 可能会进行隐式类型转换，导致索引失效。例如：索引列为整数类型，但查询条件中使用字符串进行比较。</li>
<li>联合索引不满足最左匹配原则</li>
<li>数据量过小的情况：如果表中的数据量非常小，MySQL 可能认为全表扫描比使用索引更高效，因此选择不使用索引。</li>
<li>索引列的选择性不高：如果索引列的选择性非常低，即索引列的值重复率很高，MySQL 可能不会选择使用索引进行查询，而是进行全表扫描。</li>
</ol>
<p>需要注意的是，以上情况并不是绝对的，MySQL 的查询优化器会根据具体的情况和统计信息来选择合适的执行计划，有时即使符合上述情况，MySQL 仍然可能使用索引。因此，在实际使用中，需要结合具体情况进行分析和测试，确保索引的正确使用和性能优化。</p>
<h1 id="B-树和-B-树的区别？为什么-MySQL-用-B-树实现索引？3-层-B-树有多少个节点？"><a href="#B-树和-B-树的区别？为什么-MySQL-用-B-树实现索引？3-层-B-树有多少个节点？" class="headerlink" title="B 树和 B+ 树的区别？为什么 MySQL 用 B+ 树实现索引？3 层 B+ 树有多少个节点？"></a>B 树和 B+ 树的区别？为什么 MySQL 用 B+ 树实现索引？3 层 B+ 树有多少个节点？</h1><h1 id="执行一条-SQL-的流程"><a href="#执行一条-SQL-的流程" class="headerlink" title="执行一条 SQL 的流程"></a>执行一条 SQL 的流程</h1><p><img src="https://camo.githubusercontent.com/d318aaf4eefb0297e8d605f69c76d95094effe92bcb7bd98fb07e203b1930e95/68747470733a2f2f7374617469633030312e6765656b62616e672e6f72672f7265736f757263652f696d6167652f30642f64392f30643230373065386638346334383031616462666130336264613166393864392e706e67" srcset="/img/loading.gif" lazyload alt="img"></p>
<ol>
<li><strong>连接器</strong></li>
</ol>
<ul>
<li>与客户端进行 TCP 三次握手建立连接；</li>
<li>校验客户端的用户名和密码，如果用户名或密码不对，则会报错；</li>
<li>如果用户名和密码都对了，会读取该用户的权限，然后后面的权限逻辑判断都基于此时读取到的权限；</li>
</ul>
<ol start="2">
<li><strong>查询缓存</strong></li>
</ol>
<p>​			mysql 收到 sql 后，解析第一个字段，获取语句类型，如果是 <strong>查询语句</strong>，那么就会去缓存中查找，缓存以键值对形式保存，其中键是 sql 语句，值是对应的查询结果，如果查询的语句没有命中缓存，那么就要往下继续执行，等执行完后，查询的结果就会被存入查询缓存中。</p>
<p>​			ps：这个功能因为作用不大，在 8.0 版本被删除，因为如果表里的数据经常发生变动，缓存的命中率就会变得很低，只要一个表有更新操作，那么这个表的查询缓存就会被清空。</p>
<ol start="3">
<li><strong>分析器</strong></li>
</ol>
<p>负责 <strong>词法分析</strong> 和 <strong>语法分析</strong></p>
<ul>
<li>词法分析</li>
</ul>
<p>​		MySQL 会根据你输入的字符串识别出关键字出来，构建出 SQL 语法树，这样方面后面模块获取 SQL 类型、表名、字段名、 where 条件等等。</p>
<ul>
<li>语法分析</li>
</ul>
<p>​		根据词法分析的结果，语法解析器会根据语法规则，判断你输入的这个 SQL 语句是否满足 MySQL 语法。</p>
<ol start="4">
<li><strong>预处理器</strong></li>
</ol>
<ul>
<li>检查 SQL 查询语句中的表或者字段是否存在；</li>
<li>将 select * 中的 * 符号，扩展为表上的所有列；</li>
</ul>
<ol start="5">
<li><strong>优化器</strong></li>
</ol>
<p>优化器是在表里面有多个索引的时候，决定使用哪个索引；或者在一个语句有多表关联（join）的时候，决定各个表的连接顺序。</p>
<ol start="6">
<li><strong>执行器</strong></li>
</ol>
<p>根据执行计划执行 SQL 查询语句，从存储引擎读取记录，返回给客户端</p>
<h1 id="MySQL-死锁，什么情况下会触发死锁"><a href="#MySQL-死锁，什么情况下会触发死锁" class="headerlink" title="MySQL 死锁，什么情况下会触发死锁"></a>MySQL 死锁，什么情况下会触发死锁</h1><h1 id="慢查询分析"><a href="#慢查询分析" class="headerlink" title="慢查询分析"></a>慢查询分析</h1><h2 id="慢查询相关系统参数"><a href="#慢查询相关系统参数" class="headerlink" title="慢查询相关系统参数"></a>慢查询相关系统参数</h2><h3 id="slow-query-log：开启慢查询日志"><a href="#slow-query-log：开启慢查询日志" class="headerlink" title="slow_query_log：开启慢查询日志"></a>slow_query_log：开启慢查询日志</h3><p>在 MySQL 中，慢查询日志默认为 OFF 状态，通过如下命令进行查看：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">show variables like <span class="hljs-string">&quot;slow_query_log&quot;</span>;</span><br>+----------------+-------+<br>| Variable_name  | Value |<br>+----------------+-------+<br>| slow_query_log | OFF   |<br>+----------------+-------+<br></code></pre></td></tr></table></figure>


<p>通过如下命令进行设置为 ON 状态：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">set global slow_query_log = &quot;ON&quot;;<br></code></pre></td></tr></table></figure>

<h3 id="slow-query-log-file：慢查询日志存储位置"><a href="#slow-query-log-file：慢查询日志存储位置" class="headerlink" title="slow_query_log_file：慢查询日志存储位置"></a>slow_query_log_file：慢查询日志存储位置</h3><p><code>slow_query_log_file</code> 属性表示慢查询日志存储位置，其日志默认名称为 host 名称，如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">show variables like <span class="hljs-string">&quot;slow_query_log_file&quot;</span>;</span><br>+---------------------+----------------------------------------------+<br>| Variable_name       | Value                                        |<br>+---------------------+----------------------------------------------+<br>| slow_query_log_file | /bitnami/mysql/data/mysql-primary-0-slow.log |<br>+---------------------+----------------------------------------------+<br></code></pre></td></tr></table></figure>

<p>也可使用 以下命令进行修改：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">set global slow_query_log_file = $&#123;path&#125;/$&#123;filename&#125;.log;<br></code></pre></td></tr></table></figure>

<h3 id="long-query-time：慢查询超时时间"><a href="#long-query-time：慢查询超时时间" class="headerlink" title="long_query_time：慢查询超时时间"></a>long_query_time：慢查询超时时间</h3><p>慢查询查询时间，当 SQL 执行时间超过该值时，则会记录在 slow_query_log_file 文件中，其默认为 10 ，最小值为 0，(单位：秒)。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">show variables like <span class="hljs-string">&quot;long_query_time&quot;</span>;</span><br>+-----------------+-----------+<br>| Variable_name   | Value     |<br>+-----------------+-----------+<br>| long_query_time | 10.000000 |<br>+-----------------+-----------+<br></code></pre></td></tr></table></figure>

<p>可通过以下命令进行修改：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash"><span class="hljs-built_in">set</span> global long_query_time = 5;</span><br></code></pre></td></tr></table></figure>

<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>调用 sleep 函数，让这条 sql 的执行时间超过慢查询的超时时间：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash"><span class="hljs-keyword">select</span> <span class="hljs-built_in">sleep</span>(11);</span><br></code></pre></td></tr></table></figure>

<p>查看慢查询日志内容（记得执行 quit 退出 mysql）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cat</span> /bitnami/mysql/data/mysql-primary-0-slow.log</span><br>/opt/bitnami/mysql/bin/mysqld, Version: 8.0.34 (Source distribution). started with:<br>Tcp port: 3306  Unix socket: /opt/bitnami/mysql/tmp/mysql.sock<br>Time                 Id Command    Argument<br><span class="hljs-meta prompt_"># </span><span class="language-bash">Time: 2023-08-17T16:45:52.534231Z</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">User@Host: root[root] @ localhost []  Id: 52593</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Query_time: 11.000171  Lock_time: 0.000000 Rows_sent: 1  Rows_examined: 1</span><br>SET timestamp=1692290741;<br>select sleep(11);<br></code></pre></td></tr></table></figure>

<p>慢查询日志内容含义如下：</p>
<ol>
<li>慢查询日志以 # 作为起始符。</li>
<li>User@Host：表示用户和慢查询查询的 ip 地址。</li>
<li>如上所述，表示 root 用户 localhost 地址。</li>
<li>Query_time: 表示 SQL 查询持续时间，单位 (秒)。</li>
<li>Lock_time: 表示获取锁的时间， 单位(秒)。</li>
<li>Rows_sent: 表示发送给客户端的行数。</li>
<li>Rows_examined: 表示服务器层检查的行数。</li>
<li>set timestamp：表示慢 SQL 记录时的时间戳。</li>
<li>最后一行的 select sleep(11) 则表示慢 SQL 语句。</li>
</ol>
<h1 id="Innodb-页合并和页分裂"><a href="#Innodb-页合并和页分裂" class="headerlink" title="Innodb 页合并和页分裂"></a>Innodb 页合并和页分裂</h1>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/">#面试题</a>
      
        <a href="/tags/mysql/">#mysql</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>MySQL 面试题</div>
      <div>https://autsu.github.io/2021/07/25/mysql-mian-jing/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>void</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2021年7月25日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/07/28/bian-cheng-ti-er-cha-shu-de-xia-yi-ge-jie-dian/" title="[编程题]二叉树的下一个结点">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">[编程题]二叉树的下一个结点</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/07/25/redis-mian-jing/" title="Redis 面试题">
                        <span class="hidden-mobile">Redis 面试题</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"6KXGn05vaODkTMKM7zd5lWwl-gzGzoHsz","appKey":"qIMQwH4WrxTe8ds3Ua4HAbet","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
